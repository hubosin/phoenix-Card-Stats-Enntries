<!DOCTYPE html>
<html lang="en">
<head>
  ...
</head>
<body>

<div class="container">
  <a href="index.html" class="back-button">‚Üê Back to Cards</a>

  <h1 id="cardName">Card Details</h1>
  <img id="cardImage" class="card-image" src="" alt="Card Image" style="display:none;">

  <div id="error" class="error" style="display:none;"></div>

  ...
</div>

<script>
  // Use relative paths so fetching data.json works on Pages where docs/ is site root
  const basePath = '';

  function calculate(card) {
    ...
  }

  async function loadCardDetails() {
    const params = new URLSearchParams(window.location.search);
    const cardName = params.get('name');

    if (!cardName) {
      showError('No card name provided');
      return;
    }

    try {
      const res = await fetch(`${basePath}data.json`);
      if (!res.ok) {
        showError('Failed to load data.json: ' + res.status + ' ' + res.statusText);
        return;
      }
      const text = await res.text();

      const cards = text
        .split("\n")
        .filter(line => line.trim().length > 0)
        .map(line => JSON.parse(line));

      const card = cards.find(c => c.Name === cardName);

      if (!card) {
        showError(`Card "${cardName}" not found`);
        return;
      }

      displayCard(card);
    } catch (error) {
      showError('Error loading card data: ' + error.message);
    }
  }

  function displayCard(card) {
    const s = calculate(card);

    // Set card name and image
    document.getElementById('cardName').textContent = card.Name;
    const imgEl = document.getElementById('cardImage');
    // use relative path for images
    imgEl.src = `${basePath}${card.Image}`;
    imgEl.onerror = function() {
      this.src = `${basePath}images/placeholder.png`;
    };
    imgEl.style.display = 'block';

    ...
  }

  loadCardDetails();
</script>

</body>
</html>
